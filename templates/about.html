{% extends "base.html" %}

{% block title %}{{ content.title if content else "Qui sommes-nous ?" }} - La Ferme Ousfa{% endblock %}

{% block content %}
    {% if content %}
        <div class="container mt-4">
            <div class="row justify-content-center text-center">
                <div class="col-lg-8">
                    <h1 class="mb-3">{{ content.title }}</h1>
                    {% if content.subtitle %}
                        <p class="lead text-muted">{{ content.subtitle }}</p>
                    {% endif %}
                </div>
            </div>

            {# --- Début de la galerie d'images --- #}
            {# On vérifie s'il y a une liste d'images OU une seule image fallback #}
            {% if content.images or content.image_file %}
            <div class="row justify-content-center my-4 g-4">
                
                {# Cas 1: On a une liste d'images (la nouvelle méthode) #}
                {% if content.images %}
                    {% for image in content.images %}
                        {# S'il n'y a qu'une seule image dans la liste, on la centre et on la rend plus grande #}
                        {% if content.images|length == 1 %}
                        <div class="col-lg-12">
                        {# S'il y a plusieurs images, elles se partagent l'espace #}
                        {% else %}
                        <div class="col-md-6 col-lg-4">
                        {% endif %}
                            <img src="{{ image.image_file | image_url }}" class="img-fluid rounded shadow-sm" alt="Image de la page Qui sommes-nous">
                        </div>
                    {% endfor %}

                {# Cas 2: On n'a pas de liste, mais on a l'ancienne image unique (fallback) #}
                {% elif content.image_file %}
                    <div style="text-align: center; margin-top: 2rem; margin-bottom: 2rem;">
                        <img src="{{ content.image_file | image_url }}" style="width: 90%; max-width: 900px; margin: auto; display: block; border-radius: 0.375rem; box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);" alt="Image de la page Qui sommes-nous">
                    </div>
                {% endif %}

            </div>
            {% endif %}
            {# --- Fin de la galerie d'images --- #}

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="mt-4" style="text-align: justify;">
                        {{ content.body|safe }}
                    </div>
                </div>
            </div>
        </div>
    {% else %}
        <div class="container mt-4">
            <h1 class="mb-4">Qui sommes-nous ?</h1>
            <p>Le contenu de cette page est en cours de rédaction.</p>
        </div>
    {% endif %}
{% endblock %}
