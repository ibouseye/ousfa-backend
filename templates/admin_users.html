{# On indique que ce fichier hérite de base.html #}
{% extends "admin_base.html" %}

{% block admin_content %}
    <h1 class="mb-4">Gestion du Personnel</h1>

    <p>
        <a href="{{ url_for('admin.add_staff') }}" class="btn btn-success">Ajouter un membre du personnel</a>
    </p>

{% if users %}
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th scope="col">#ID</th>
                <th scope="col">Nom d'utilisateur</th>
                <th scope="col">Rôle</th>
                <th scope="col">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <th scope="row">{{ user.id }}</th>
                <td>{{ user.username }}</td>
                <td>{{ user.role }}</td>
                <td><a href="{{ url_for('admin.edit_user', user_id=user.id) }}" class="btn btn-sm btn-primary">Modifier</a>
                <form action="{{ url_for('admin.delete_user', user_id=user.id) }}" method="POST" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ?');" style="display: inline-block; margin-left: 5px;">
                    {{ delete_form.hidden_tag() }}
                    <button type="submit" class="btn btn-sm btn-danger">Supprimer</button>
                </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div class="alert alert-info" role="alert">
        Aucun utilisateur enregistré pour le moment.
    </div>
{% endif %}
{% endblock %}